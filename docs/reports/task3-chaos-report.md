# Task 3 — Chaos Theory & Time Series Analysis Report

Date: 2026-02-01

## 1. Scope and Assignment Alignment
This report fulfills Task 3 of the assignment using Python implementations (in place of Fractan). The task requires:
- A time series with at least 1000 samples.
- Hurst exponent estimation.
- Fractal (correlation) dimension estimation.
- Interpretation (stochastic vs. chaotic vs. deterministic).

We use the golden sample time series derived from FreshRetailNet-50K (hourly sales, 90 days × 24 hours = 2160 samples). Results are computed on daytime hours to reduce the impact of overnight zeros.

## 2. Data and Preprocessing
**Source:** data/golden_sample.parquet (generated by src/data_loader.py).

**Rationale for daytime filtering:** The dataset contains long zero runs overnight (stockouts/low demand) which collapse distance-based estimators. We therefore analyze **08:00–22:00** to reduce sparsity.

**Preprocessing utilities:**
- `filter_daytime_hours()` and `aggregate_daily()` in [src/preprocessing.py](src/preprocessing.py).

## 3. Methods
### 3.1 Hurst Exponent (R/S)
We use a rescaled range (R/S) estimator with log-spaced windows and zero-variance window filtering. We also compute a log–log fit quality (R²).
- Implementation: `hurst_rs_details()` in [src/chaos_metrics.py](src/chaos_metrics.py).

### 3.2 Correlation Dimension ($D_2$)
We estimate correlation dimension using a Grassberger–Procaccia workflow with time-delay embedding and log–log scaling of the correlation sum. Zero distances are filtered before log transforms, and R² is reported.
- Implementation: `correlation_dimension_details()` in [src/chaos_metrics.py](src/chaos_metrics.py).

### 3.3 Baseline vs scikit‑learn fit
Two runs are provided:
- **Baseline:** regression via `numpy.polyfit`.
- **scikit‑learn:** regression via `sklearn.linear_model.LinearRegression`.

Artifacts:
- Baseline metrics: [docs/reports/artifacts/2026-02-01/chaos_metrics_analysis.txt](docs/reports/artifacts/2026-02-01/chaos_metrics_analysis.txt)
- scikit‑learn metrics: [docs/reports/artifacts/2026-02-01/chaos_metrics_analysis_sklearn.txt](docs/reports/artifacts/2026-02-01/chaos_metrics_analysis_sklearn.txt)
- Comparison summary: [docs/reports/artifacts/2026-02-01/chaos_metrics_comparison.txt](docs/reports/artifacts/2026-02-01/chaos_metrics_comparison.txt)

## 4. Results
### 4.1 Baseline (numpy.polyfit)
From [docs/reports/artifacts/2026-02-01/chaos_metrics_analysis.txt](docs/reports/artifacts/2026-02-01/chaos_metrics_analysis.txt):
- **Daytime hourly:** $H=0.6073$, $D_2=0.0000$
- **Daytime daily:** $H=0.9905$, $D_2=0.0000$

### 4.2 scikit‑learn (LinearRegression)
From [docs/reports/artifacts/2026-02-01/chaos_metrics_analysis_sklearn.txt](docs/reports/artifacts/2026-02-01/chaos_metrics_analysis_sklearn.txt):
- **Daytime hourly:** $H=0.5863$, $D_2=1.1452$ (R²=0.9950)
- **Daytime daily:** $H=0.9720$, $D_2=0.0000$

### 4.3 Comparison Summary
From [docs/reports/artifacts/2026-02-01/chaos_metrics_comparison.txt](docs/reports/artifacts/2026-02-01/chaos_metrics_comparison.txt):
- Hourly $H$ decreased slightly: $0.6073 \rightarrow 0.5863$.
- Daily $H$ decreased slightly: $0.9905 \rightarrow 0.9720$.
- Hourly $D_2$ improved: $0.0000 \rightarrow 1.1452$.
- Daily $D_2$ unchanged at $0.0000$ (low sample size + repeated values).

## 5. Interpretation
- **Hourly Hurst ($H\approx0.59$):** Persistent behavior, suggesting memory/long-range dependence rather than pure randomness.
- **Daily Hurst ($H\approx0.97$):** Extremely high persistence; likely dominated by trend/seasonality and limited sample length.
- **Hourly $D_2 \approx 1.15$ (sklearn):** Low-dimensional structure consistent with non-trivial dynamics. This supports potential deterministic components rather than purely stochastic noise.
- **Daily $D_2 = 0.0$:** Indicates degeneracy (too few points and/or repeated values). Daily aggregation is too coarse for stable $D_2$ estimation in this dataset.

Overall, the hourly series shows persistent dynamics and a non-zero fractal dimension, which is consistent with **low-dimensional complex behavior** rather than purely random noise. However, the presence of stockouts and strong seasonality means the results should be interpreted cautiously.

## 6. Limitations
- High stockout prevalence and repeated values can distort $D_2$.
- Daily aggregation reduces sample size (90 points), making correlation dimension unreliable.
- R/S estimation is sensitive to non-stationarity; detrending may refine $H$.

## 7. Next Steps (Optional)
- Detrend or seasonally adjust the hourly series before R/S estimation.
- Exclude zero-only days or apply a small jitter to avoid zero-distance collapse.
- Explore higher embedding dimensions for $D_2$ with controlled subsampling.

## 8. Artifacts and Reproducibility
- HTML report: [docs/reports/task3_chaos_report.html](docs/reports/task3_chaos_report.html)
- Scripts:
  - [src/chaos_analysis.py](src/chaos_analysis.py)
  - [src/chaos_analysis_sklearn.py](src/chaos_analysis_sklearn.py)
  - [src/report_generator.py](src/report_generator.py)

